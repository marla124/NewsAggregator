2024-02-01 19:56:10.244 +03:00 [INF] User profile is available. Using 'C:\Users\Брест\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-02-01 19:56:10.455 +03:00 [INF] Start installing Hangfire SQL objects...
2024-02-01 19:56:11.013 +03:00 [INF] Hangfire SQL objects installed.
2024-02-01 19:56:11.229 +03:00 [INF] Now listening on: http://localhost:5154
2024-02-01 19:56:11.237 +03:00 [INF] Starting Hangfire Server using job storage: 'SQL Server: DESKTOP-2FD6QEU@NewAggregatorDB'
2024-02-01 19:56:11.238 +03:00 [INF] Using the following options for SQL Server job storage: Queue poll interval: 00:00:00.
2024-02-01 19:56:11.240 +03:00 [INF] Using the following options for Hangfire Server:
    Worker count: 20
    Listening queues: 'default'
    Shutdown timeout: 00:00:15
    Schedule polling interval: 00:00:15
2024-02-01 19:56:11.262 +03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-02-01 19:56:11.263 +03:00 [INF] Hosting environment: Development
2024-02-01 19:56:11.264 +03:00 [INF] Content root path: C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject
2024-02-01 19:56:11.375 +03:00 [INF] Server desktop-2fd6qeu:2604:e92de965 successfully announced in 114,3424 ms
2024-02-01 19:56:11.381 +03:00 [INF] Server desktop-2fd6qeu:2604:e92de965 is starting the registered dispatchers: ServerWatchdog, ServerJobCancellationWatcher, ExpirationManager, CountersAggregator, SqlServerHeartbeatProcess, Worker, DelayedJobScheduler, RecurringJobScheduler...
2024-02-01 19:56:11.522 +03:00 [INF] Server desktop-2fd6qeu:2604:e92de965 all the dispatchers started
2024-02-01 19:56:12.955 +03:00 [WRN] The query uses a row limiting operator ('Skip'/'Take') without an 'OrderBy' operator. This may lead to unpredictable results. If the 'Distinct' operator is used after 'OrderBy', then make sure to use the 'OrderBy' operator after 'Distinct' as the ordering would otherwise get erased.
2024-02-01 19:56:13.075 +03:00 [INF] Executed DbCommand (28ms) [Parameters=[@__id_0='?' (DbType = Guid)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(1) [s].[Id], [s].[Name], [s].[RSSUrl], [s].[Url]
FROM [Sources] AS [s]
WHERE [s].[Id] = @__id_0
2024-02-01 19:56:13.075 +03:00 [INF] Executed DbCommand (27ms) [Parameters=[@__p_0='?' (DbType = Int32)], CommandType='"Text"', CommandTimeout='30']
SELECT TOP(@__p_0) [n].[Id]
FROM [News] AS [n]
WHERE [n].[Rate] IS NULL
2024-02-01 19:56:13.253 +03:00 [WRN] Failed to process the job '13': an exception occurred. Retry attempt 2 of 10 will be performed in 00:00:48.
System.InvalidCastException: Unable to cast object of type 'System.Guid' to type 'NewsAggregatingProject.Data.Entities.News'.
   at Microsoft.EntityFrameworkCore.Query.RelationalSqlTranslatingExpressionVisitor.ParameterValueExtractor[T](QueryContext context, String baseParameterName, List`1 complexPropertyChain, IProperty property)
   at lambda_method55(Closure, QueryContext)
   at Microsoft.EntityFrameworkCore.Query.Internal.QueryCompiler.ExecuteAsync[TResult](Expression query, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Query.Internal.EntityQueryProvider.ExecuteAsync[TResult](Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, Expression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.ExecuteAsync[TSource,TResult](MethodInfo operatorMethodInfo, IQueryable`1 source, LambdaExpression expression, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.EntityFrameworkQueryableExtensions.FirstOrDefaultAsync[TSource](IQueryable`1 source, Expression`1 predicate, CancellationToken cancellationToken)
   at NewsAggregatingProject.Data.CQS.Queries.GetNewsTextByIdQueryHandler.Handle(GetNewsTextByIdQuery request, CancellationToken cancellationToken) in C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject.Data.CQS\QueryHandlers\GetNewsTextByIdQueryHandler.cs:line 23
   at NewsAggregatingProject.Services.NewsService.Rate(Guid id) in C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject.Services\NewsService.cs:line 145
   at NewsAggregatingProject.Services.NewsService.RateBatchOfUnratedNews() in C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject.Services\NewsService.cs:line 140
   at System.RuntimeMethodHandle.InvokeMethod(Object target, Void** arguments, Signature sig, Boolean isConstructor)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2024-02-01 19:56:13.539 +03:00 [INF] Executed DbCommand (2ms) [Parameters=[], CommandType='"Text"', CommandTimeout='30']
SELECT [n].[SourceUrl]
FROM [News] AS [n]
2024-02-01 19:56:13.721 +03:00 [ERR] Failed executing DbCommand (20ms) [Parameters=[@p0='?' (DbType = Guid), @p1='?' (Size = 4000), @p2='?' (DbType = DateTime2), @p3='?' (Size = 4000), @p4='?' (DbType = Single), @p5='?' (DbType = Guid), @p6='?' (Size = 4000), @p7='?' (Size = 4000), @p8='?' (DbType = Guid), @p9='?' (Size = 4000), @p10='?' (DbType = DateTime2), @p11='?' (Size = 4000), @p12='?' (DbType = Single), @p13='?' (DbType = Guid), @p14='?' (Size = 4000), @p15='?' (Size = 4000), @p16='?' (DbType = Guid), @p17='?' (Size = 4000), @p18='?' (DbType = DateTime2), @p19='?' (Size = 4000), @p20='?' (DbType = Single), @p21='?' (DbType = Guid), @p22='?' (Size = 4000), @p23='?' (Size = 4000), @p24='?' (DbType = Guid), @p25='?' (Size = 4000), @p26='?' (DbType = DateTime2), @p27='?' (Size = 4000), @p28='?' (DbType = Single), @p29='?' (DbType = Guid), @p30='?' (Size = 4000), @p31='?' (Size = 4000), @p32='?' (DbType = Guid), @p33='?' (Size = 4000), @p34='?' (DbType = DateTime2), @p35='?' (Size = 4000), @p36='?' (DbType = Single), @p37='?' (DbType = Guid), @p38='?' (Size = 4000), @p39='?' (Size = 4000), @p40='?' (DbType = Guid), @p41='?' (Size = 4000), @p42='?' (DbType = DateTime2), @p43='?' (Size = 4000), @p44='?' (DbType = Single), @p45='?' (DbType = Guid), @p46='?' (Size = 4000), @p47='?' (Size = 4000), @p48='?' (DbType = Guid), @p49='?' (Size = 4000), @p50='?' (DbType = DateTime2), @p51='?' (Size = 4000), @p52='?' (DbType = Single), @p53='?' (DbType = Guid), @p54='?' (Size = 4000), @p55='?' (Size = 4000), @p56='?' (DbType = Guid), @p57='?' (Size = 4000), @p58='?' (DbType = DateTime2), @p59='?' (Size = 4000), @p60='?' (DbType = Single), @p61='?' (DbType = Guid), @p62='?' (Size = 4000), @p63='?' (Size = 4000), @p64='?' (DbType = Guid), @p65='?' (Size = 4000), @p66='?' (DbType = DateTime2), @p67='?' (Size = 4000), @p68='?' (DbType = Single), @p69='?' (DbType = Guid), @p70='?' (Size = 4000), @p71='?' (Size = 4000), @p72='?' (DbType = Guid), @p73='?' (Size = 4000), @p74='?' (DbType = DateTime2), @p75='?' (Size = 4000), @p76='?' (DbType = Single), @p77='?' (DbType = Guid), @p78='?' (Size = 4000), @p79='?' (Size = 4000), @p80='?' (DbType = Guid), @p81='?' (Size = 4000), @p82='?' (DbType = DateTime2), @p83='?' (Size = 4000), @p84='?' (DbType = Single), @p85='?' (DbType = Guid), @p86='?' (Size = 4000), @p87='?' (Size = 4000), @p88='?' (DbType = Guid), @p89='?' (Size = 4000), @p90='?' (DbType = DateTime2), @p91='?' (Size = 4000), @p92='?' (DbType = Single), @p93='?' (DbType = Guid), @p94='?' (Size = 4000), @p95='?' (Size = 4000), @p96='?' (DbType = Guid), @p97='?' (Size = 4000), @p98='?' (DbType = DateTime2), @p99='?' (Size = 4000), @p100='?' (DbType = Single), @p101='?' (DbType = Guid), @p102='?' (Size = 4000), @p103='?' (Size = 4000), @p104='?' (DbType = Guid), @p105='?' (Size = 4000), @p106='?' (DbType = DateTime2), @p107='?' (Size = 4000), @p108='?' (DbType = Single), @p109='?' (DbType = Guid), @p110='?' (Size = 4000), @p111='?' (Size = 4000), @p112='?' (DbType = Guid), @p113='?' (Size = 4000), @p114='?' (DbType = DateTime2), @p115='?' (Size = 4000), @p116='?' (DbType = Single), @p117='?' (DbType = Guid), @p118='?' (Size = 4000), @p119='?' (Size = 4000), @p120='?' (DbType = Guid), @p121='?' (Size = 4000), @p122='?' (DbType = DateTime2), @p123='?' (Size = 4000), @p124='?' (DbType = Single), @p125='?' (DbType = Guid), @p126='?' (Size = 4000), @p127='?' (Size = 4000), @p128='?' (DbType = Guid), @p129='?' (Size = 4000), @p130='?' (DbType = DateTime2), @p131='?' (Size = 4000), @p132='?' (DbType = Single), @p133='?' (DbType = Guid), @p134='?' (Size = 4000), @p135='?' (Size = 4000), @p136='?' (DbType = Guid), @p137='?' (Size = 4000), @p138='?' (DbType = DateTime2), @p139='?' (Size = 4000), @p140='?' (DbType = Single), @p141='?' (DbType = Guid), @p142='?' (Size = 4000), @p143='?' (Size = 4000), @p144='?' (DbType = Guid), @p145='?' (Size = 4000), @p146='?' (DbType = DateTime2), @p147='?' (Size = 4000), @p148='?' (DbType = Single), @p149='?' (DbType = Guid), @p150='?' (Size = 4000), @p151='?' (Size = 4000), @p152='?' (DbType = Guid), @p153='?' (Size = 4000), @p154='?' (DbType = DateTime2), @p155='?' (Size = 4000), @p156='?' (DbType = Single), @p157='?' (DbType = Guid), @p158='?' (Size = 4000), @p159='?' (Size = 4000), @p160='?' (DbType = Guid), @p161='?' (Size = 4000), @p162='?' (DbType = DateTime2), @p163='?' (Size = 4000), @p164='?' (DbType = Single), @p165='?' (DbType = Guid), @p166='?' (Size = 4000), @p167='?' (Size = 4000), @p168='?' (DbType = Guid), @p169='?' (Size = 4000), @p170='?' (DbType = DateTime2), @p171='?' (Size = 4000), @p172='?' (DbType = Single), @p173='?' (DbType = Guid), @p174='?' (Size = 4000), @p175='?' (Size = 4000), @p176='?' (DbType = Guid), @p177='?' (Size = 4000), @p178='?' (DbType = DateTime2), @p179='?' (Size = 4000), @p180='?' (DbType = Single), @p181='?' (DbType = Guid), @p182='?' (Size = 4000), @p183='?' (Size = 4000), @p184='?' (DbType = Guid), @p185='?' (Size = 4000), @p186='?' (DbType = DateTime2), @p187='?' (Size = 4000), @p188='?' (DbType = Single), @p189='?' (DbType = Guid), @p190='?' (Size = 4000), @p191='?' (Size = 4000), @p192='?' (DbType = Guid), @p193='?' (Size = 4000), @p194='?' (DbType = DateTime2), @p195='?' (Size = 4000), @p196='?' (DbType = Single), @p197='?' (DbType = Guid), @p198='?' (Size = 4000), @p199='?' (Size = 4000), @p200='?' (DbType = Guid), @p201='?' (Size = 4000), @p202='?' (DbType = DateTime2), @p203='?' (Size = 4000), @p204='?' (DbType = Single), @p205='?' (DbType = Guid), @p206='?' (Size = 4000), @p207='?' (Size = 4000), @p208='?' (DbType = Guid), @p209='?' (Size = 4000), @p210='?' (DbType = DateTime2), @p211='?' (Size = 4000), @p212='?' (DbType = Single), @p213='?' (DbType = Guid), @p214='?' (Size = 4000), @p215='?' (Size = 4000), @p216='?' (DbType = Guid), @p217='?' (Size = 4000), @p218='?' (DbType = DateTime2), @p219='?' (Size = 4000), @p220='?' (DbType = Single), @p221='?' (DbType = Guid), @p222='?' (Size = 4000), @p223='?' (Size = 4000), @p224='?' (DbType = Guid), @p225='?' (Size = 4000), @p226='?' (DbType = DateTime2), @p227='?' (Size = 4000), @p228='?' (DbType = Single), @p229='?' (DbType = Guid), @p230='?' (Size = 4000), @p231='?' (Size = 4000), @p232='?' (DbType = Guid), @p233='?' (Size = 4000), @p234='?' (DbType = DateTime2), @p235='?' (Size = 4000), @p236='?' (DbType = Single), @p237='?' (DbType = Guid), @p238='?' (Size = 4000), @p239='?' (Size = 4000)], CommandType='"Text"', CommandTimeout='30']
SET IMPLICIT_TRANSACTIONS OFF;
SET NOCOUNT ON;
INSERT INTO [News] ([Id], [ContentNew], [DataAndTime], [Description], [Rate], [SourceId], [SourceUrl], [Title])
VALUES (@p0, @p1, @p2, @p3, @p4, @p5, @p6, @p7),
(@p8, @p9, @p10, @p11, @p12, @p13, @p14, @p15),
(@p16, @p17, @p18, @p19, @p20, @p21, @p22, @p23),
(@p24, @p25, @p26, @p27, @p28, @p29, @p30, @p31),
(@p32, @p33, @p34, @p35, @p36, @p37, @p38, @p39),
(@p40, @p41, @p42, @p43, @p44, @p45, @p46, @p47),
(@p48, @p49, @p50, @p51, @p52, @p53, @p54, @p55),
(@p56, @p57, @p58, @p59, @p60, @p61, @p62, @p63),
(@p64, @p65, @p66, @p67, @p68, @p69, @p70, @p71),
(@p72, @p73, @p74, @p75, @p76, @p77, @p78, @p79),
(@p80, @p81, @p82, @p83, @p84, @p85, @p86, @p87),
(@p88, @p89, @p90, @p91, @p92, @p93, @p94, @p95),
(@p96, @p97, @p98, @p99, @p100, @p101, @p102, @p103),
(@p104, @p105, @p106, @p107, @p108, @p109, @p110, @p111),
(@p112, @p113, @p114, @p115, @p116, @p117, @p118, @p119),
(@p120, @p121, @p122, @p123, @p124, @p125, @p126, @p127),
(@p128, @p129, @p130, @p131, @p132, @p133, @p134, @p135),
(@p136, @p137, @p138, @p139, @p140, @p141, @p142, @p143),
(@p144, @p145, @p146, @p147, @p148, @p149, @p150, @p151),
(@p152, @p153, @p154, @p155, @p156, @p157, @p158, @p159),
(@p160, @p161, @p162, @p163, @p164, @p165, @p166, @p167),
(@p168, @p169, @p170, @p171, @p172, @p173, @p174, @p175),
(@p176, @p177, @p178, @p179, @p180, @p181, @p182, @p183),
(@p184, @p185, @p186, @p187, @p188, @p189, @p190, @p191),
(@p192, @p193, @p194, @p195, @p196, @p197, @p198, @p199),
(@p200, @p201, @p202, @p203, @p204, @p205, @p206, @p207),
(@p208, @p209, @p210, @p211, @p212, @p213, @p214, @p215),
(@p216, @p217, @p218, @p219, @p220, @p221, @p222, @p223),
(@p224, @p225, @p226, @p227, @p228, @p229, @p230, @p231),
(@p232, @p233, @p234, @p235, @p236, @p237, @p238, @p239);
2024-02-01 19:56:13.749 +03:00 [ERR] An exception occurred in the database while saving changes for context type 'NewsAggregatingProject.Data.NewsAggregatingDBContext'.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Не удалось вставить значение NULL в столбец "ContentNew", таблицы "NewAggregatorDB.dbo.News"; в столбце запрещены значения NULL. Ошибка в INSERT.
Выполнение данной инструкции было прервано.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0eb91304-a097-464b-b298-c91555604e38
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Не удалось вставить значение NULL в столбец "ContentNew", таблицы "NewAggregatorDB.dbo.News"; в столбце запрещены значения NULL. Ошибка в INSERT.
Выполнение данной инструкции было прервано.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0eb91304-a097-464b-b298-c91555604e38
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
2024-02-01 19:56:13.850 +03:00 [WRN] Failed to process the job '14': an exception occurred. Retry attempt 2 of 10 will be performed in 00:01:14.
Microsoft.EntityFrameworkCore.DbUpdateException: An error occurred while saving the entity changes. See the inner exception for details.
 ---> Microsoft.Data.SqlClient.SqlException (0x80131904): Не удалось вставить значение NULL в столбец "ContentNew", таблицы "NewAggregatorDB.dbo.News"; в столбце запрещены значения NULL. Ошибка в INSERT.
Выполнение данной инструкции было прервано.
   at Microsoft.Data.SqlClient.SqlCommand.<>c.<ExecuteDbDataReaderAsync>b__209_0(Task`1 result)
   at System.Threading.Tasks.ContinuationResultTaskFromResultTask`2.InnerInvoke()
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
--- End of stack trace from previous location ---
   at System.Threading.ExecutionContext.RunInternal(ExecutionContext executionContext, ContextCallback callback, Object state)
   at System.Threading.Tasks.Task.ExecuteWithThreadLocal(Task& currentTaskSlot, Thread threadPoolThread)
--- End of stack trace from previous location ---
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Storage.RelationalCommand.ExecuteReaderAsync(RelationalCommandParameterObject parameterObject, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
ClientConnectionId:0eb91304-a097-464b-b298-c91555604e38
Error Number:515,State:2,Class:16
   --- End of inner exception stack trace ---
   at Microsoft.EntityFrameworkCore.Update.ReaderModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Update.Internal.SqlServerModificationCommandBatch.ExecuteAsync(IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.Update.Internal.BatchExecutor.ExecuteAsync(IEnumerable`1 commandBatches, IRelationalConnection connection, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(IList`1 entriesToSave, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.ChangeTracking.Internal.StateManager.SaveChangesAsync(StateManager stateManager, Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.SqlServer.Storage.Internal.SqlServerExecutionStrategy.ExecuteAsync[TState,TResult](TState state, Func`4 operation, Func`4 verifySucceeded, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at Microsoft.EntityFrameworkCore.DbContext.SaveChangesAsync(Boolean acceptAllChangesOnSuccess, CancellationToken cancellationToken)
   at NewsAggregatingProject.Data.CQS.CommandsHandlers.InsertRssDataCommandHandler.Handle(InsertRssDataCommand command, CancellationToken cancellationToken) in C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject.Data.CQS\CommandHandlers\InsertRssDataCommandHandler.cs:line 25
   at MediatR.Wrappers.RequestHandlerWrapperImpl`1.<>c__DisplayClass1_0.<<Handle>g__Handler|0>d.MoveNext()
--- End of stack trace from previous location ---
   at NewsAggregatingProject.Services.NewsService.AggregateNewsFromRssBySourceId(Guid sourceId) in C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject.Services\NewsService.cs:line 215
   at InvokeStub_TaskAwaiter.GetResult(Object, Object, IntPtr*)
   at System.Reflection.MethodBaseInvoker.InvokeWithNoArgs(Object obj, BindingFlags invokeAttr)
2024-02-01 19:56:19.221 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/ - null null
2024-02-01 19:56:19.328 +03:00 [WRN] Failed to determine the https port for redirect.
2024-02-01 19:56:19.368 +03:00 [INF] Executing endpoint 'NewsAggregatingProject.Controllers.HomeController.Index (NewsAggregatingProject)'
2024-02-01 19:56:19.396 +03:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller NewsAggregatingProject.Controllers.HomeController (NewsAggregatingProject).
2024-02-01 19:56:19.452 +03:00 [INF] Hello from HomeController. Its works
2024-02-01 19:56:19.513 +03:00 [INF] Executing ViewResult, running view Index.
2024-02-01 19:56:19.715 +03:00 [INF] Executed ViewResult - view Index executed in 204.3385ms.
2024-02-01 19:56:19.720 +03:00 [INF] Executed action NewsAggregatingProject.Controllers.HomeController.Index (NewsAggregatingProject) in 321.0453ms
2024-02-01 19:56:19.722 +03:00 [INF] Executed endpoint 'NewsAggregatingProject.Controllers.HomeController.Index (NewsAggregatingProject)'
2024-02-01 19:56:19.728 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/ - 200 null text/html; charset=utf-8 514.0674ms
2024-02-01 19:56:19.738 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/NewsAggregatingProject.styles.css?v=Jg_OWFgEVGzbT4cywdMe3WCxN0p5tC8FQbMx3dfOETs - null null
2024-02-01 19:56:19.738 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/css/bootstrap.min.css - null null
2024-02-01 19:56:19.739 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/css/site.css?v=SnKAoo3aWK7zl5gv-wHkQXus6da0Ri1UK9opz-d2Ies - null null
2024-02-01 19:56:19.740 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/... - null null
2024-02-01 19:56:19.741 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/lib/jquery/dist/jquery.min.js - null null
2024-02-01 19:56:19.748 +03:00 [INF] The file /css/site.css was not modified
2024-02-01 19:56:19.748 +03:00 [INF] The file /lib/bootstrap/dist/css/bootstrap.min.css was not modified
2024-02-01 19:56:19.752 +03:00 [INF] The file /lib/jquery/dist/jquery.min.js was not modified
2024-02-01 19:56:19.759 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/css/site.css?v=SnKAoo3aWK7zl5gv-wHkQXus6da0Ri1UK9opz-d2Ies - 304 null text/css 20.4136ms
2024-02-01 19:56:19.760 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/css/bootstrap.min.css - 304 null text/css 21.842ms
2024-02-01 19:56:19.760 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/lib/jquery/dist/jquery.min.js - 304 null text/javascript 19.5019ms
2024-02-01 19:56:19.771 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/... - 404 0 null 30.7055ms
2024-02-01 19:56:19.775 +03:00 [INF] Sending file. Request path: '/NewsAggregatingProject.styles.css'. Physical path: 'C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject\obj\Debug\net8.0\scopedcss\bundle\NewsAggregatingProject.styles.css'
2024-02-01 19:56:19.775 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5154/..., Response status code: 404
2024-02-01 19:56:19.777 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/NewsAggregatingProject.styles.css?v=Jg_OWFgEVGzbT4cywdMe3WCxN0p5tC8FQbMx3dfOETs - 200 1140 text/css 38.7707ms
2024-02-01 19:56:19.786 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/js/bootstrap.bundle.min.js - null null
2024-02-01 19:56:19.787 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/_vs/browserLink - null null
2024-02-01 19:56:19.788 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/js/site.js?v=w2GsYSpk2XeXLLi3LUJ0xDQwuJlWKV_0SMjqgDocKXs - null null
2024-02-01 19:56:19.788 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/... - null null
2024-02-01 19:56:19.788 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/_framework/aspnetcore-browser-refresh.js - null null
2024-02-01 19:56:19.791 +03:00 [INF] The file /lib/bootstrap/dist/js/bootstrap.bundle.min.js was not modified
2024-02-01 19:56:19.800 +03:00 [INF] The file /js/site.js was not modified
2024-02-01 19:56:19.805 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/... - 404 0 null 17.6059ms
2024-02-01 19:56:19.808 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/js/bootstrap.bundle.min.js - 304 null text/javascript 22.6194ms
2024-02-01 19:56:19.809 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 21.5093ms
2024-02-01 19:56:19.811 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5154/..., Response status code: 404
2024-02-01 19:56:19.824 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/js/site.js?v=w2GsYSpk2XeXLLi3LUJ0xDQwuJlWKV_0SMjqgDocKXs - 304 null text/javascript 36.9506ms
2024-02-01 19:56:19.868 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/_vs/browserLink - 200 null text/javascript; charset=UTF-8 81.0254ms
2024-02-01 19:56:19.891 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - null null
2024-02-01 19:56:19.950 +03:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: 'C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js.map'
2024-02-01 19:56:19.953 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - 200 327261 text/plain 63.4433ms
2024-02-01 19:56:20.039 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/favicon.ico - null null
2024-02-01 19:56:20.078 +03:00 [INF] The file /favicon.ico was not modified
2024-02-01 19:56:20.081 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/favicon.ico - 304 null image/x-icon 42.2888ms
2024-02-01 19:56:24.746 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/User/Register - null null
2024-02-01 19:56:24.759 +03:00 [INF] Executing endpoint 'NewsAggregatingProject.Controllers.UserController.Register (NewsAggregatingProject)'
2024-02-01 19:56:24.762 +03:00 [INF] Route matched with {action = "Register", controller = "User"}. Executing controller action with signature Microsoft.AspNetCore.Mvc.IActionResult Register() on controller NewsAggregatingProject.Controllers.UserController (NewsAggregatingProject).
2024-02-01 19:56:24.783 +03:00 [INF] Executing ViewResult, running view Register.
2024-02-01 19:56:24.833 +03:00 [INF] Executed ViewResult - view Register executed in 51.5051ms.
2024-02-01 19:56:24.836 +03:00 [INF] Executed action NewsAggregatingProject.Controllers.UserController.Register (NewsAggregatingProject) in 70.7417ms
2024-02-01 19:56:24.839 +03:00 [INF] Executed endpoint 'NewsAggregatingProject.Controllers.UserController.Register (NewsAggregatingProject)'
2024-02-01 19:56:24.849 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/_vs/browserLink - null null
2024-02-01 19:56:24.849 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/lib/jquery-validation/dist/jquery.validate.min.js - null null
2024-02-01 19:56:24.849 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/_framework/aspnetcore-browser-refresh.js - null null
2024-02-01 19:56:24.849 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - null null
2024-02-01 19:56:24.850 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/User/Register - 200 null text/html; charset=utf-8 104.8391ms
2024-02-01 19:56:24.898 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - null null
2024-02-01 19:56:24.899 +03:00 [INF] The file /lib/jquery-validation/dist/jquery.validate.min.js was not modified
2024-02-01 19:56:24.903 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/lib/jquery-validation/dist/jquery.validate.min.js - 304 null text/javascript 54.2346ms
2024-02-01 19:56:24.912 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/_vs/browserLink - 200 null text/javascript; charset=UTF-8 62.9272ms
2024-02-01 19:56:24.915 +03:00 [INF] The file /lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js was not modified
2024-02-01 19:56:24.916 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 67.9612ms
2024-02-01 19:56:24.926 +03:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: 'C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js.map'
2024-02-01 19:56:24.928 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/lib/jquery-validation-unobtrusive/jquery.validate.unobtrusive.min.js - 304 null text/javascript 78.8674ms
2024-02-01 19:56:24.934 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - 200 327261 text/plain 36.125ms
2024-02-01 19:56:30.153 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/ - null null
2024-02-01 19:56:30.158 +03:00 [INF] Executing endpoint 'NewsAggregatingProject.Controllers.HomeController.Index (NewsAggregatingProject)'
2024-02-01 19:56:30.159 +03:00 [INF] Route matched with {action = "Index", controller = "Home"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Index(System.Nullable`1[System.Int32]) on controller NewsAggregatingProject.Controllers.HomeController (NewsAggregatingProject).
2024-02-01 19:56:30.162 +03:00 [INF] Hello from HomeController. Its works
2024-02-01 19:56:30.163 +03:00 [INF] Executing ViewResult, running view Index.
2024-02-01 19:56:30.165 +03:00 [INF] Executed ViewResult - view Index executed in 2.1218ms.
2024-02-01 19:56:30.166 +03:00 [INF] Executed action NewsAggregatingProject.Controllers.HomeController.Index (NewsAggregatingProject) in 5.3182ms
2024-02-01 19:56:30.168 +03:00 [INF] Executed endpoint 'NewsAggregatingProject.Controllers.HomeController.Index (NewsAggregatingProject)'
2024-02-01 19:56:30.169 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/ - 200 null text/html; charset=utf-8 16.0549ms
2024-02-01 19:56:30.173 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/_framework/aspnetcore-browser-refresh.js - null null
2024-02-01 19:56:30.173 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/... - null null
2024-02-01 19:56:30.174 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/_vs/browserLink - null null
2024-02-01 19:56:30.175 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/_framework/aspnetcore-browser-refresh.js - 200 13780 application/javascript; charset=utf-8 2.1979ms
2024-02-01 19:56:30.178 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/... - 404 0 null 4.9077ms
2024-02-01 19:56:30.186 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/_vs/browserLink - 200 null text/javascript; charset=UTF-8 12.0005ms
2024-02-01 19:56:30.188 +03:00 [INF] Request reached the end of the middleware pipeline without being handled by application code. Request path: GET http://localhost:5154/..., Response status code: 404
2024-02-01 19:56:30.204 +03:00 [INF] Request starting HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - null null
2024-02-01 19:56:30.214 +03:00 [INF] Sending file. Request path: '/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map'. Physical path: 'C:\Users\Брест\myprj\NewsAggregator\NewsAggregatingProject\NewsAggregatingProject\wwwroot\lib\bootstrap\dist\js\bootstrap.bundle.min.js.map'
2024-02-01 19:56:30.216 +03:00 [INF] Request finished HTTP/1.1 GET http://localhost:5154/lib/bootstrap/dist/js/bootstrap.bundle.min.js.map - 200 327261 text/plain 12.1674ms
